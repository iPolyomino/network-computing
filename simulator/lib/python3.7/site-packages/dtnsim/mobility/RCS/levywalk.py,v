head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2018.11.13.06.36.54;	author ohsaki;	state Exp;
branches;
next	1.2;

1.2
date	2018.10.15.12.34.41;	author ohsaki;	state Exp;
branches;
next	1.1;

1.1
date	2018.05.27.08.32.41;	author ohsaki;	state Exp;
branches;
next	;


desc
@@


1.3
log
@*** empty log message ***
@
text
@#!/usr/bin/env python3
#
# A mobility class for Levy walk.
# Copyright (c) 2011-2015, Hiroyuki Ohsaki.
# All rights reserved.
#
# Id: LevyWalk.pm,v 1.11 2015/12/09 14:45:23 ohsaki Exp $
#

import random
import math

from dtnsim.mobility.rwp import RandomWaypoint
from vector import Vector as V

def pareto(scale, shape):
    """Generate a random variable following the Pareto distribution with
    parameters SCALE and SHAPE.  Note that the mean of the Pareto distribution
    is given by SHAPE * SCALE / (SHAPE - 1)."""
    return scale / random.uniform(0, 1 / shape)

class LevyWalk(RandomWaypoint):
    def __init__(self, scale=100, shape=1.5, *kargs, **kwargs):
        # NOTE: must be assigned before calling __init__
        self.scale = scale
        self.shape = shape
        super().__init__(*kargs, **kwargs)

    def goal_coordinate(self):
        """Randomly choose the goal in the field so that the distance from the
        current coordinate follows Pareto distribution."""
        length = pareto(self.scale, self.shape)
        theta = random.uniform(0, 2 * math.pi)
        goal = self.current + length * V(math.cos(theta), math.sin(theta))
        # FIXME: the goal coordinate is simply limited by the field boundaries.
        # A node should *bounce back* with the boundaries.
        x = max(0, min(goal[0], self.width))
        y = max(0, min(goal[1], self.height))
        return V(x, y)
@


1.2
log
@*** empty log message ***
@
text
@d23 2
a24 2
    def __init__(self, scale=100, shape=1.5, *args, **kwargs):
        super().__init__()
d27 1
@


1.1
log
@Initial revision
@
text
@a13 1

a15 3

# Generate a random variable with Pareto distribution.  Mean of the
# Pareto distribution is given by shape * scale / (shape - 1).
d17 3
a21 1

a22 1
    # create and initialize the object
a27 2
    # randomly choose the goal in the field so that the distance from the
    # current coordinate follows Pareto distribution
d29 2
d34 2
a35 2
        # FIXME: the goal coordinate is simply limited with the field
        # boundaries.  A node should *bounce back* with the boundaries.
@
